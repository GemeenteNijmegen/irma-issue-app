// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`ApiStage snapshot 1`] = `
Object {
  "Outputs": Object {
    "ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC": Object {
      "Export": Object {
        "Name": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "kmskey6257DE3D",
          "Arn",
        ],
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "kmskey6257DE3D": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Description": "encryption key for yivi-issue-app",
        "EnableKeyRotation": true,
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Retain",
    },
    "kmskeyAlias78F320A9": Object {
      "Properties": Object {
        "AliasName": "alias/yivi-issue-app/userdata",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "kmskey6257DE3D",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
    },
    "ssmsessions13C58A2BA": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/kms-datakey-arn",
        "Type": "String",
        "Value": Object {
          "Fn::GetAtt": Array [
            "kmskey6257DE3D",
            "Arn",
          ],
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 2`] = `
Object {
  "Outputs": Object {
    "ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE": Object {
      "Export": Object {
        "Name": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "sessionstable9FEB2915",
          "Arn",
        ],
      },
    },
    "ExportsOutputRefsessionstable9FEB29154441788E": Object {
      "Export": Object {
        "Name": "api-stage-snapshot-sessions-stack:ExportsOutputRefsessionstable9FEB29154441788E",
      },
      "Value": Object {
        "Ref": "sessionstable9FEB2915",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "sessionstable9FEB2915": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "sessionid",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": Array [
          Object {
            "AttributeName": "sessionid",
            "KeyType": "HASH",
          },
        ],
        "SSESpecification": Object {
          "KMSMasterKeyId": Object {
            "Fn::ImportValue": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "TableName": "yivi-issue-sessions",
        "TimeToLiveSpecification": Object {
          "AttributeName": "ttl",
          "Enabled": true,
        },
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Retain",
    },
    "ssmsessions13C58A2BA": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/sessionstable-arn",
        "Type": "String",
        "Value": Object {
          "Fn::GetAtt": Array [
            "sessionstable9FEB2915",
            "Arn",
          ],
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 3`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuegemeentenijmegenaccounthostedzoneidC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/gemeente-nijmegen/account/hostedzone/id",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuegemeentenijmegenaccounthostedzonenameC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/gemeente-nijmegen/account/hostedzone/name",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "hostedzone0562BB58": Object {
      "Properties": Object {
        "Name": Object {
          "Fn::Join": Array [
            "",
            Array [
              "yivi-issue.",
              Object {
                "Ref": "SsmParameterValuegemeentenijmegenaccounthostedzonenameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              ".",
            ],
          ],
        },
      },
      "Type": "AWS::Route53::HostedZone",
    },
    "hostedzoneid1AC4B18C": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/zone/id",
        "Type": "String",
        "Value": Object {
          "Ref": "hostedzone0562BB58",
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "hostedzonenameD77D0DBE": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/zone/name",
        "Type": "String",
        "Value": Object {
          "Fn::Join": Array [
            "",
            Array [
              "yivi-issue.",
              Object {
                "Ref": "SsmParameterValuegemeentenijmegenaccounthostedzonenameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
            ],
          ],
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "nsrecord7FD33D64": Object {
      "Properties": Object {
        "HostedZoneId": Object {
          "Ref": "SsmParameterValuegemeentenijmegenaccounthostedzoneidC96584B6F00A464EAD1953AFF4B05118Parameter",
        },
        "Name": Object {
          "Fn::Join": Array [
            "",
            Array [
              "yivi-issue.",
              Object {
                "Ref": "SsmParameterValuegemeentenijmegenaccounthostedzonenameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              ".",
            ],
          ],
        },
        "ResourceRecords": Object {
          "Fn::GetAtt": Array [
            "hostedzone0562BB58",
            "NameServers",
          ],
        },
        "TTL": "1800",
        "Type": "NS",
      },
      "Type": "AWS::Route53::RecordSet",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 4`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": Object {
      "DependsOn": Array [
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "e45ee2082d227db1b6f0292696ce5ce2b061c105d15efb341925ca040d1feb68.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:PutRetentionPolicy",
                "logs:DeleteRetentionPolicy",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "Roles": Array [
          Object {
            "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "certarn063A669C": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/certificates/certificate-arn",
        "Type": "String",
        "Value": Object {
          "Ref": "certificateEC031123",
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "certificateEC031123": Object {
      "Properties": Object {
        "DomainName": Object {
          "Fn::GetAtt": Array [
            "zoneparamsSsmParametersF6CC8160",
            "/cdk/yivi-issue-app/zone/name",
          ],
        },
        "DomainValidationOptions": Array [
          Object {
            "DomainName": Object {
              "Fn::GetAtt": Array [
                "zoneparamsSsmParametersF6CC8160",
                "/cdk/yivi-issue-app/zone/name",
              ],
            },
            "HostedZoneId": Object {
              "Fn::GetAtt": Array [
                "zoneparamsSsmParametersF6CC8160",
                "/cdk/yivi-issue-app/zone/id",
              ],
            },
          },
          Object {
            "DomainName": "snapshot-tests.nijmegen.nl",
            "HostedZoneId": Object {
              "Fn::GetAtt": Array [
                "zoneparamsSsmParametersF6CC8160",
                "/cdk/yivi-issue-app/zone/id",
              ],
            },
          },
        ],
        "SubjectAlternativeNames": Array [
          "snapshot-tests.nijmegen.nl",
        ],
        "Tags": Array [
          Object {
            "Key": "Name",
            "Value": "api-stage-snapshot/us-cert-stack/certificate",
          },
        ],
        "ValidationMethod": "DNS",
      },
      "Type": "AWS::CertificateManager::Certificate",
    },
    "zoneparamsMyHandler86FC9CD9": Object {
      "DependsOn": Array [
        "zoneparamsMyHandlerServiceRoleDefaultPolicy67632765",
        "zoneparamsMyHandlerServiceRole973E2CB4",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3.zip",
        },
        "Handler": "remote-parameters.on_event",
        "Role": Object {
          "Fn::GetAtt": Array [
            "zoneparamsMyHandlerServiceRole973E2CB4",
            "Arn",
          ],
        },
        "Runtime": "python3.8",
      },
      "Type": "AWS::Lambda::Function",
    },
    "zoneparamsMyHandlerServiceRole973E2CB4": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "zoneparamsMyHandlerServiceRoleDefaultPolicy67632765": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "ssm:GetParametersByPath",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "zoneparamsMyHandlerServiceRoleDefaultPolicy67632765",
        "Roles": Array [
          Object {
            "Ref": "zoneparamsMyHandlerServiceRole973E2CB4",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "zoneparamsMyProviderframeworkonEventBF714C35": Object {
      "DependsOn": Array [
        "zoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicy48727A09",
        "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b.zip",
        },
        "Description": "AWS CDK resource provider framework - onEvent (api-stage-snapshot/us-cert-stack/zone-params/MyProvider)",
        "Environment": Object {
          "Variables": Object {
            "USER_ON_EVENT_FUNCTION_ARN": Object {
              "Fn::GetAtt": Array [
                "zoneparamsMyHandler86FC9CD9",
                "Arn",
              ],
            },
          },
        },
        "Handler": "framework.onEvent",
        "Role": Object {
          "Fn::GetAtt": Array [
            "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "zoneparamsMyProviderframeworkonEventLogRetention72A02004": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "zoneparamsMyProviderframeworkonEventBF714C35",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "zoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicy48727A09": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "zoneparamsMyHandler86FC9CD9",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "zoneparamsMyHandler86FC9CD9",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "zoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicy48727A09",
        "Roles": Array [
          Object {
            "Ref": "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "zoneparamsSsmParametersF6CC8160": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "zoneparamsMyProviderframeworkonEventBF714C35",
            "Arn",
          ],
        },
        "parameterPath": "/cdk/yivi-issue-app/zone",
        "regionName": "eu-central-1",
        "stackName": "api-stage-snapshot-us-cert-stack",
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 5`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuegemeentenijmegenaccountdnsseckmskeyarnC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/gemeente-nijmegen/account/dnssec/kmskey/arn",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": Object {
      "DependsOn": Array [
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "e45ee2082d227db1b6f0292696ce5ce2b061c105d15efb341925ca040d1feb68.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:PutRetentionPolicy",
                "logs:DeleteRetentionPolicy",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "Roles": Array [
          Object {
            "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "dnssec": Object {
      "DependsOn": Array [
        "dnsseckeysigningkey",
      ],
      "Properties": Object {
        "HostedZoneId": Object {
          "Fn::GetAtt": Array [
            "zoneparamsSsmParametersF6CC8160",
            "/cdk/yivi-issue-app/zone/id",
          ],
        },
      },
      "Type": "AWS::Route53::DNSSEC",
    },
    "dnsseckeysigningkey": Object {
      "Properties": Object {
        "HostedZoneId": Object {
          "Fn::GetAtt": Array [
            "zoneparamsSsmParametersF6CC8160",
            "/cdk/yivi-issue-app/zone/id",
          ],
        },
        "KeyManagementServiceArn": Object {
          "Ref": "SsmParameterValuegemeentenijmegenaccountdnsseckmskeyarnC96584B6F00A464EAD1953AFF4B05118Parameter",
        },
        "Name": "yivi_issue_ksk",
        "Status": "ACTIVE",
      },
      "Type": "AWS::Route53::KeySigningKey",
    },
    "dnssecrecordcustomresource8F10C2F6": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "dnssec",
      ],
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "dnssecrecordproviderframeworkonEvent8EF81F08",
            "Arn",
          ],
        },
        "hostedZoneId": Object {
          "Fn::GetAtt": Array [
            "zoneparamsSsmParametersF6CC8160",
            "/cdk/yivi-issue-app/zone/id",
          ],
        },
        "hostedZoneName": Object {
          "Fn::GetAtt": Array [
            "zoneparamsSsmParametersF6CC8160",
            "/cdk/yivi-issue-app/zone/name",
          ],
        },
        "keySigningKeyName": "yivi_issue_ksk",
        "parentHostedZoneId": Object {
          "Fn::GetAtt": Array [
            "rootzoneparamsSsmParameters799A10AA",
            "/gemeente-nijmegen/account/hostedzone/id",
          ],
        },
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
    "dnssecrecordlambda74E5C966": Object {
      "DependsOn": Array [
        "dnssec",
        "dnssecrecordlambdaServiceRoleDefaultPolicyD2FEB526",
        "dnssecrecordlambdaServiceRoleAB09F568",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "04aae5aa9e9ed5e0aeefb4bbbfb82449ef35f3db68a98770c2e5cc4237666963.zip",
        },
        "Description": "src/dnssec-record/dnssec-record.lambda.ts",
        "Environment": Object {
          "Variables": Object {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
          },
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "dnssecrecordlambdaServiceRoleAB09F568",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 60,
      },
      "Type": "AWS::Lambda::Function",
    },
    "dnssecrecordlambdaServiceRoleAB09F568": Object {
      "DependsOn": Array [
        "dnssec",
      ],
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "dnssecrecordlambdaServiceRoleDefaultPolicyD2FEB526": Object {
      "DependsOn": Array [
        "dnssec",
      ],
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "route53:GetChange",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "route53:GetDNSSEC",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":route53:::hostedzone/",
                    Object {
                      "Fn::GetAtt": Array [
                        "zoneparamsSsmParametersF6CC8160",
                        "/cdk/yivi-issue-app/zone/id",
                      ],
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": "route53:ChangeResourceRecordSets",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":route53:::hostedzone/",
                    Object {
                      "Fn::GetAtt": Array [
                        "rootzoneparamsSsmParameters799A10AA",
                        "/gemeente-nijmegen/account/hostedzone/id",
                      ],
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "dnssecrecordlambdaServiceRoleDefaultPolicyD2FEB526",
        "Roles": Array [
          Object {
            "Ref": "dnssecrecordlambdaServiceRoleAB09F568",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "dnssecrecordproviderframeworkonEvent8EF81F08": Object {
      "DependsOn": Array [
        "dnssec",
        "dnssecrecordproviderframeworkonEventServiceRoleDefaultPolicyCC931F8E",
        "dnssecrecordproviderframeworkonEventServiceRoleE3750F55",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b.zip",
        },
        "Description": "AWS CDK resource provider framework - onEvent (api-stage-snapshot/dnssec-stack/dnssec-record/provider)",
        "Environment": Object {
          "Variables": Object {
            "USER_ON_EVENT_FUNCTION_ARN": Object {
              "Fn::GetAtt": Array [
                "dnssecrecordlambda74E5C966",
                "Arn",
              ],
            },
          },
        },
        "Handler": "framework.onEvent",
        "Role": Object {
          "Fn::GetAtt": Array [
            "dnssecrecordproviderframeworkonEventServiceRoleE3750F55",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "dnssecrecordproviderframeworkonEventLogRetention42683AC3": Object {
      "DependsOn": Array [
        "dnssec",
      ],
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "dnssecrecordproviderframeworkonEvent8EF81F08",
              },
            ],
          ],
        },
        "RetentionInDays": 30,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "dnssecrecordproviderframeworkonEventServiceRoleDefaultPolicyCC931F8E": Object {
      "DependsOn": Array [
        "dnssec",
      ],
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "dnssecrecordlambda74E5C966",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "dnssecrecordlambda74E5C966",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "dnssecrecordproviderframeworkonEventServiceRoleDefaultPolicyCC931F8E",
        "Roles": Array [
          Object {
            "Ref": "dnssecrecordproviderframeworkonEventServiceRoleE3750F55",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "dnssecrecordproviderframeworkonEventServiceRoleE3750F55": Object {
      "DependsOn": Array [
        "dnssec",
      ],
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "rootzoneparamsMyHandlerE3D20D2F": Object {
      "DependsOn": Array [
        "rootzoneparamsMyHandlerServiceRoleDefaultPolicyCB2056C0",
        "rootzoneparamsMyHandlerServiceRoleAC00B4FB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3.zip",
        },
        "Handler": "remote-parameters.on_event",
        "Role": Object {
          "Fn::GetAtt": Array [
            "rootzoneparamsMyHandlerServiceRoleAC00B4FB",
            "Arn",
          ],
        },
        "Runtime": "python3.8",
      },
      "Type": "AWS::Lambda::Function",
    },
    "rootzoneparamsMyHandlerServiceRoleAC00B4FB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "rootzoneparamsMyHandlerServiceRoleDefaultPolicyCB2056C0": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "ssm:GetParametersByPath",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "rootzoneparamsMyHandlerServiceRoleDefaultPolicyCB2056C0",
        "Roles": Array [
          Object {
            "Ref": "rootzoneparamsMyHandlerServiceRoleAC00B4FB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "rootzoneparamsMyProviderframeworkonEvent11A6AF7D": Object {
      "DependsOn": Array [
        "rootzoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicyDE757064",
        "rootzoneparamsMyProviderframeworkonEventServiceRole853B95D5",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b.zip",
        },
        "Description": "AWS CDK resource provider framework - onEvent (api-stage-snapshot/dnssec-stack/root-zone-params/MyProvider)",
        "Environment": Object {
          "Variables": Object {
            "USER_ON_EVENT_FUNCTION_ARN": Object {
              "Fn::GetAtt": Array [
                "rootzoneparamsMyHandlerE3D20D2F",
                "Arn",
              ],
            },
          },
        },
        "Handler": "framework.onEvent",
        "Role": Object {
          "Fn::GetAtt": Array [
            "rootzoneparamsMyProviderframeworkonEventServiceRole853B95D5",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "rootzoneparamsMyProviderframeworkonEventLogRetention6AA2BD83": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "rootzoneparamsMyProviderframeworkonEvent11A6AF7D",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "rootzoneparamsMyProviderframeworkonEventServiceRole853B95D5": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "rootzoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicyDE757064": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "rootzoneparamsMyHandlerE3D20D2F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "rootzoneparamsMyHandlerE3D20D2F",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "rootzoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicyDE757064",
        "Roles": Array [
          Object {
            "Ref": "rootzoneparamsMyProviderframeworkonEventServiceRole853B95D5",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "rootzoneparamsSsmParameters799A10AA": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "rootzoneparamsMyProviderframeworkonEvent11A6AF7D",
            "Arn",
          ],
        },
        "parameterPath": "/gemeente-nijmegen/account/hostedzone",
        "regionName": "eu-central-1",
        "stackName": "api-stage-snapshot-dnssec-stack",
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
    "zoneparamsMyHandler86FC9CD9": Object {
      "DependsOn": Array [
        "zoneparamsMyHandlerServiceRoleDefaultPolicy67632765",
        "zoneparamsMyHandlerServiceRole973E2CB4",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3.zip",
        },
        "Handler": "remote-parameters.on_event",
        "Role": Object {
          "Fn::GetAtt": Array [
            "zoneparamsMyHandlerServiceRole973E2CB4",
            "Arn",
          ],
        },
        "Runtime": "python3.8",
      },
      "Type": "AWS::Lambda::Function",
    },
    "zoneparamsMyHandlerServiceRole973E2CB4": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "zoneparamsMyHandlerServiceRoleDefaultPolicy67632765": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "ssm:GetParametersByPath",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "zoneparamsMyHandlerServiceRoleDefaultPolicy67632765",
        "Roles": Array [
          Object {
            "Ref": "zoneparamsMyHandlerServiceRole973E2CB4",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "zoneparamsMyProviderframeworkonEventBF714C35": Object {
      "DependsOn": Array [
        "zoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicy48727A09",
        "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
          },
          "S3Key": "53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b.zip",
        },
        "Description": "AWS CDK resource provider framework - onEvent (api-stage-snapshot/dnssec-stack/zone-params/MyProvider)",
        "Environment": Object {
          "Variables": Object {
            "USER_ON_EVENT_FUNCTION_ARN": Object {
              "Fn::GetAtt": Array [
                "zoneparamsMyHandler86FC9CD9",
                "Arn",
              ],
            },
          },
        },
        "Handler": "framework.onEvent",
        "Role": Object {
          "Fn::GetAtt": Array [
            "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "zoneparamsMyProviderframeworkonEventLogRetention72A02004": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "zoneparamsMyProviderframeworkonEventBF714C35",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "zoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicy48727A09": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "zoneparamsMyHandler86FC9CD9",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "zoneparamsMyHandler86FC9CD9",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "zoneparamsMyProviderframeworkonEventServiceRoleDefaultPolicy48727A09",
        "Roles": Array [
          Object {
            "Ref": "zoneparamsMyProviderframeworkonEventServiceRole1B3019D2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "zoneparamsSsmParametersF6CC8160": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "zoneparamsMyProviderframeworkonEventBF714C35",
            "Arn",
          ],
        },
        "parameterPath": "/cdk/yivi-issue-app/zone",
        "regionName": "eu-central-1",
        "stackName": "api-stage-snapshot-dnssec-stack",
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 6`] = `
Object {
  "Outputs": Object {
    "ExportsOutputRefyiviissueapiE2472BD5F75B43B2": Object {
      "Export": Object {
        "Name": "api-stage-snapshot-api-stack:ExportsOutputRefyiviissueapiE2472BD5F75B43B2",
      },
      "Value": Object {
        "Ref": "yiviissueapiE2472BD5",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappauthClientIDC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/authClientID",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappauthScopeC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/authScope",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappauthUrlBaseC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/authUrlBase",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappbrpapiurlC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/brp-api-url",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappsubjectdiversifierC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/subject/diversifier",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappyiviapidemoC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/yivi-api-demo",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappyiviapihostC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/yivi-api-host",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappzonenameC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/zone/name",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "tlskeyParameter": Object {
      "Default": "/cdk/yivi-issue-app/mtls-clientcert",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "tlsrootcaParameter": Object {
      "Default": "/cdk/yivi-issue-app/mtls-rootca",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": Object {
      "DependsOn": Array [
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "e45ee2082d227db1b6f0292696ce5ce2b061c105d15efb341925ca040d1feb68.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:PutRetentionPolicy",
                "logs:DeleteRetentionPolicy",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "Roles": Array [
          Object {
            "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "readonlyrole4C10139C": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Condition": Object {
                "Bool": Object {
                  "aws:MultiFactorAuthPresent": true,
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::098799052470:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Description": "Read-only role for YIVI issue app with access to lambdas, logging, session store",
        "ManagedPolicyArns": Array [
          Object {
            "Ref": "yiviissueloginfunctionreadpolicyEC46C9B3",
          },
          Object {
            "Ref": "yiviissuelogoutfunctionreadpolicyD825DFDF",
          },
          Object {
            "Ref": "yiviissueauthfunctionreadpolicy2F4400A2",
          },
          Object {
            "Ref": "yiviissueissuefunctionreadpolicy60E04DB6",
          },
          Object {
            "Ref": "yiviissuecallbackfunctionreadpolicyCEABC5A6",
          },
          Object {
            "Ref": "readpolicy4D8790E4",
          },
        ],
        "RoleName": "yivi-issue-full-read",
      },
      "Type": "AWS::IAM::Role",
    },
    "readpolicy4D8790E4": Object {
      "Properties": Object {
        "Description": "",
        "Path": "/",
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:Describe*",
                "dynamodb:List*",
                "dynamodb:GetItem",
                "dynamodb:Query",
                "dynamodb:Scan",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "ssmapi1DB221E5E": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/apigateway-id",
        "Type": "String",
        "Value": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "ssmreadonly3F91D67D": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/role-readonly-arn",
        "Type": "String",
        "Value": Object {
          "Fn::GetAtt": Array [
            "readonlyrole4C10139C",
            "Arn",
          ],
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "yiviissueapiDefaultStage4809F5E1": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "AutoDeploy": true,
        "StageName": "$default",
      },
      "Type": "AWS::ApiGatewayV2::Stage",
    },
    "yiviissueapiE2472BD5": Object {
      "Properties": Object {
        "Description": "YIVI issue webapplicatie",
        "Name": "yivi-issue-api",
        "ProtocolType": "HTTP",
      },
      "Type": "AWS::ApiGatewayV2::Api",
    },
    "yiviissueapiGETauthA2DE7E23": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "AuthorizationType": "NONE",
        "RouteKey": "GET /auth",
        "Target": Object {
          "Fn::Join": Array [
            "",
            Array [
              "integrations/",
              Object {
                "Ref": "yiviissueapiGETauthyiviissueauth399259A3",
              },
            ],
          ],
        },
      },
      "Type": "AWS::ApiGatewayV2::Route",
    },
    "yiviissueapiGETauthyiviissueauth399259A3": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": Object {
          "Fn::GetAtt": Array [
            "yiviissueauthfunctionlambda52CA4F94",
            "Arn",
          ],
        },
        "PayloadFormatVersion": "2.0",
      },
      "Type": "AWS::ApiGatewayV2::Integration",
    },
    "yiviissueapiGETauthyiviissueauthPermission0320CD77": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "yiviissueauthfunctionlambda52CA4F94",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              Object {
                "Ref": "AWS::Region",
              },
              ":",
              Object {
                "Ref": "AWS::AccountId",
              },
              ":",
              Object {
                "Ref": "yiviissueapiE2472BD5",
              },
              "/*/*/auth",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "yiviissueapiGETcallbackDDD974F8": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "AuthorizationType": "NONE",
        "RouteKey": "GET /callback",
        "Target": Object {
          "Fn::Join": Array [
            "",
            Array [
              "integrations/",
              Object {
                "Ref": "yiviissueapiGETcallbackyiviissuesuccessD3EF66DF",
              },
            ],
          ],
        },
      },
      "Type": "AWS::ApiGatewayV2::Route",
    },
    "yiviissueapiGETcallbackyiviissuesuccessD3EF66DF": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": Object {
          "Fn::GetAtt": Array [
            "yiviissuecallbackfunctionlambda4BFF25F6",
            "Arn",
          ],
        },
        "PayloadFormatVersion": "2.0",
      },
      "Type": "AWS::ApiGatewayV2::Integration",
    },
    "yiviissueapiGETcallbackyiviissuesuccessPermission551D3B5B": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "yiviissuecallbackfunctionlambda4BFF25F6",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              Object {
                "Ref": "AWS::Region",
              },
              ":",
              Object {
                "Ref": "AWS::AccountId",
              },
              ":",
              Object {
                "Ref": "yiviissueapiE2472BD5",
              },
              "/*/*/callback",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "yiviissueapiGETissueE4F4E4AF": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "AuthorizationType": "NONE",
        "RouteKey": "GET /issue",
        "Target": Object {
          "Fn::Join": Array [
            "",
            Array [
              "integrations/",
              Object {
                "Ref": "yiviissueapiGETissueyiviissueissueDBF9AF6E",
              },
            ],
          ],
        },
      },
      "Type": "AWS::ApiGatewayV2::Route",
    },
    "yiviissueapiGETissueyiviissueissueDBF9AF6E": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": Object {
          "Fn::GetAtt": Array [
            "yiviissueissuefunctionlambda1C2A36A2",
            "Arn",
          ],
        },
        "PayloadFormatVersion": "2.0",
      },
      "Type": "AWS::ApiGatewayV2::Integration",
    },
    "yiviissueapiGETissueyiviissueissuePermission80455FE6": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "yiviissueissuefunctionlambda1C2A36A2",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              Object {
                "Ref": "AWS::Region",
              },
              ":",
              Object {
                "Ref": "AWS::AccountId",
              },
              ":",
              Object {
                "Ref": "yiviissueapiE2472BD5",
              },
              "/*/*/issue",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "yiviissueapiGETlogin5CFE9700": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "AuthorizationType": "NONE",
        "RouteKey": "GET /login",
        "Target": Object {
          "Fn::Join": Array [
            "",
            Array [
              "integrations/",
              Object {
                "Ref": "yiviissueapiGETloginyiviissuelogin7F620EE7",
              },
            ],
          ],
        },
      },
      "Type": "AWS::ApiGatewayV2::Route",
    },
    "yiviissueapiGETloginyiviissuelogin7F620EE7": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": Object {
          "Fn::GetAtt": Array [
            "yiviissueloginfunctionlambda541A4BA9",
            "Arn",
          ],
        },
        "PayloadFormatVersion": "2.0",
      },
      "Type": "AWS::ApiGatewayV2::Integration",
    },
    "yiviissueapiGETloginyiviissueloginPermission00F2D705": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "yiviissueloginfunctionlambda541A4BA9",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              Object {
                "Ref": "AWS::Region",
              },
              ":",
              Object {
                "Ref": "AWS::AccountId",
              },
              ":",
              Object {
                "Ref": "yiviissueapiE2472BD5",
              },
              "/*/*/login",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "yiviissueapiGETlogoutE87847C7": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "AuthorizationType": "NONE",
        "RouteKey": "GET /logout",
        "Target": Object {
          "Fn::Join": Array [
            "",
            Array [
              "integrations/",
              Object {
                "Ref": "yiviissueapiGETlogoutyiviissuelogout18BF5E6A",
              },
            ],
          ],
        },
      },
      "Type": "AWS::ApiGatewayV2::Route",
    },
    "yiviissueapiGETlogoutyiviissuelogout18BF5E6A": Object {
      "Properties": Object {
        "ApiId": Object {
          "Ref": "yiviissueapiE2472BD5",
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": Object {
          "Fn::GetAtt": Array [
            "yiviissuelogoutfunctionlambda54F6F1E2",
            "Arn",
          ],
        },
        "PayloadFormatVersion": "2.0",
      },
      "Type": "AWS::ApiGatewayV2::Integration",
    },
    "yiviissueapiGETlogoutyiviissuelogoutPermission03B6DB7B": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "yiviissuelogoutfunctionlambda54F6F1E2",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": Object {
          "Fn::Join": Array [
            "",
            Array [
              "arn:",
              Object {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              Object {
                "Ref": "AWS::Region",
              },
              ":",
              Object {
                "Ref": "AWS::AccountId",
              },
              ":",
              Object {
                "Ref": "yiviissueapiE2472BD5",
              },
              "/*/*/logout",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "yiviissueauthfunctionMetricFilter9AB1ABAF": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "FilterPattern": "\\"ERROR\\"",
        "LogGroupName": Object {
          "Fn::GetAtt": Array [
            "yiviissueauthfunctionlambdaLogRetention25E36E85",
            "LogGroupName",
          ],
        },
        "MetricTransformations": Array [
          Object {
            "MetricName": "Errors",
            "MetricNamespace": "yivi-issue-app/yivi-issue-auth-function",
            "MetricValue": "1",
          },
        ],
      },
      "Type": "AWS::Logs::MetricFilter",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueauthfunctionlambda52CA4F94": Object {
      "DependsOn": Array [
        "yiviissueauthfunctionlambdaServiceRoleDefaultPolicy146836AD",
        "yiviissueauthfunctionlambdaServiceRoleDC70D45F",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "7bbb70f9656d472b122f25a4a5b72083b2e96b8320e3b140586e807de0c3645b.zip",
        },
        "Description": "Authenticatie-lambd voor de YIVI issue-applicatie.",
        "Environment": Object {
          "Variables": Object {
            "APPLICATION_URL_BASE": "https://snapshot-tests.nijmegen.nl/",
            "AUTH_URL_BASE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthUrlBaseC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "CLIENT_SECRET_ARN": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":secretsmanager:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":secret:/cdk/yivi-issue-app/oidc-clientsecret",
                ],
              ],
            },
            "OIDC_CLIENT_ID": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthClientIDC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "OIDC_SCOPE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthScopeC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "SESSION_TABLE": Object {
              "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputRefsessionstable9FEB29154441788E",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:aws:lambda:",
                Object {
                  "Ref": "AWS::Region",
                },
                ":580247275435:layer:LambdaInsightsExtension:16",
              ],
            ],
          },
        ],
        "MemorySize": 512,
        "Role": Object {
          "Fn::GetAtt": Array [
            "yiviissueauthfunctionlambdaServiceRoleDC70D45F",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "yiviissueauthfunctionlambdaLogRetention25E36E85": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "yiviissueauthfunctionlambda52CA4F94",
              },
            ],
          ],
        },
        "RetentionInDays": 30,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "yiviissueauthfunctionlambdaServiceRoleDC70D45F": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueauthfunctionlambdaServiceRoleDefaultPolicy146836AD": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::ImportValue": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":secret:/cdk/yivi-issue-app/oidc-clientsecret-??????",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueauthfunctionlambdaServiceRoleDefaultPolicy146836AD",
        "Roles": Array [
          Object {
            "Ref": "yiviissueauthfunctionlambdaServiceRoleDC70D45F",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueauthfunctionreadpolicy2F4400A2": Object {
      "Properties": Object {
        "Description": "",
        "Path": "/",
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "lambda:List*",
                "lambda:GetAccountSettings",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "lambda:Get*",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueauthfunctionlambda52CA4F94",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:Get*",
                "logs:List*",
                "logs:StartQuery",
                "logs:StopQuery",
                "logs:TestMetricFilter",
                "logs:FilterLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Fn::GetAtt": Array [
                        "yiviissueauthfunctionlambdaLogRetention25E36E85",
                        "LogGroupName",
                      ],
                    },
                    ":*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:List*",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "yiviissueauthfunctionyiviissueappyiviissueauthfunctionalarmD26003E2": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AlarmDescription": "This alarm triggers if the function yivi-issue-auth-function is logging more than 5 errors over n minutes.",
        "AlarmName": "Increased error rate for yivi-issue-auth-function",
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "EvaluationPeriods": 3,
        "MetricName": "Errors",
        "Namespace": "yivi-issue-app/yivi-issue-auth-function",
        "Period": 300,
        "Statistic": "Sum",
        "Threshold": 5,
      },
      "Type": "AWS::CloudWatch::Alarm",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissuecallbackfunctionMetricFilter804A6B3F": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "FilterPattern": "\\"ERROR\\"",
        "LogGroupName": Object {
          "Fn::GetAtt": Array [
            "yiviissuecallbackfunctionlambdaLogRetention7CD0DCCE",
            "LogGroupName",
          ],
        },
        "MetricTransformations": Array [
          Object {
            "MetricName": "Errors",
            "MetricNamespace": "yivi-issue-app/yivi-issue-callback-function",
            "MetricValue": "1",
          },
        ],
      },
      "Type": "AWS::Logs::MetricFilter",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissuecallbackfunctionlambda4BFF25F6": Object {
      "DependsOn": Array [
        "yiviissuecallbackfunctionlambdaServiceRoleDefaultPolicy5FEF76CA",
        "yiviissuecallbackfunctionlambdaServiceRole60A0B3AD",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "157e577662ec8ded282e266cbc3165768940fbedf8ca8118fa335a40331b35e0.zip",
        },
        "Description": "Callback-lambda voor de YIVI issue-applicatie.",
        "Environment": Object {
          "Variables": Object {
            "APPLICATION_URL_BASE": "https://snapshot-tests.nijmegen.nl/",
            "AUTH_URL_BASE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthUrlBaseC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "DIVERSIFYER": Object {
              "Ref": "SsmParameterValuecdkyiviissueappsubjectdiversifierC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "OIDC_CLIENT_ID": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthClientIDC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "OIDC_SCOPE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthScopeC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "SESSION_TABLE": Object {
              "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputRefsessionstable9FEB29154441788E",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:aws:lambda:",
                Object {
                  "Ref": "AWS::Region",
                },
                ":580247275435:layer:LambdaInsightsExtension:16",
              ],
            ],
          },
        ],
        "MemorySize": 512,
        "Role": Object {
          "Fn::GetAtt": Array [
            "yiviissuecallbackfunctionlambdaServiceRole60A0B3AD",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "yiviissuecallbackfunctionlambdaLogRetention7CD0DCCE": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "yiviissuecallbackfunctionlambda4BFF25F6",
              },
            ],
          ],
        },
        "RetentionInDays": 365,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "yiviissuecallbackfunctionlambdaServiceRole60A0B3AD": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissuecallbackfunctionlambdaServiceRoleDefaultPolicy5FEF76CA": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::ImportValue": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissuecallbackfunctionlambdaServiceRoleDefaultPolicy5FEF76CA",
        "Roles": Array [
          Object {
            "Ref": "yiviissuecallbackfunctionlambdaServiceRole60A0B3AD",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissuecallbackfunctionloggroupssm21FFD463": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/statistics/log-group-name",
        "Type": "String",
        "Value": Object {
          "Fn::GetAtt": Array [
            "yiviissuecallbackfunctionlambdaLogRetention7CD0DCCE",
            "LogGroupName",
          ],
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "yiviissuecallbackfunctionreadpolicyCEABC5A6": Object {
      "Properties": Object {
        "Description": "",
        "Path": "/",
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "lambda:List*",
                "lambda:GetAccountSettings",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "lambda:Get*",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissuecallbackfunctionlambda4BFF25F6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:Get*",
                "logs:List*",
                "logs:StartQuery",
                "logs:StopQuery",
                "logs:TestMetricFilter",
                "logs:FilterLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Fn::GetAtt": Array [
                        "yiviissuecallbackfunctionlambdaLogRetention7CD0DCCE",
                        "LogGroupName",
                      ],
                    },
                    ":*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:List*",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "yiviissuecallbackfunctionyiviissueappyiviissuecallbackfunctionalarmE145A957": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AlarmDescription": "This alarm triggers if the function yivi-issue-callback-function is logging more than 5 errors over n minutes.",
        "AlarmName": "Increased error rate for yivi-issue-callback-function",
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "EvaluationPeriods": 3,
        "MetricName": "Errors",
        "Namespace": "yivi-issue-app/yivi-issue-callback-function",
        "Period": 300,
        "Statistic": "Sum",
        "Threshold": 5,
      },
      "Type": "AWS::CloudWatch::Alarm",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueissuefunctionMetricFilter38BAB54C": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "FilterPattern": "\\"ERROR\\"",
        "LogGroupName": Object {
          "Fn::GetAtt": Array [
            "yiviissueissuefunctionlambdaLogRetentionE169A59E",
            "LogGroupName",
          ],
        },
        "MetricTransformations": Array [
          Object {
            "MetricName": "Errors",
            "MetricNamespace": "yivi-issue-app/yivi-issue-issue-function",
            "MetricValue": "1",
          },
        ],
      },
      "Type": "AWS::Logs::MetricFilter",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueissuefunctionlambda1C2A36A2": Object {
      "DependsOn": Array [
        "yiviissueissuefunctionlambdaServiceRoleDefaultPolicy52F594EF",
        "yiviissueissuefunctionlambdaServiceRole7E017D84",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "bea8846912bee12661b1c5e9b4f891addc2cfa6d5ae0d9b7be18998a784cf31f.zip",
        },
        "Description": "Home-lambda voor de YIVI issue-applicatie.",
        "Environment": Object {
          "Variables": Object {
            "APPLICATION_URL_BASE": "https://snapshot-tests.nijmegen.nl/",
            "AUTH_URL_BASE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthUrlBaseC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "BRP_API_URL": Object {
              "Ref": "SsmParameterValuecdkyiviissueappbrpapiurlC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "MTLS_CLIENT_CERT_NAME": "/cdk/yivi-issue-app/mtls-clientcert",
            "MTLS_PRIVATE_KEY_ARN": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":secretsmanager:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":secret:/cdk/yivi-issue-app/mtls-privatekey",
                ],
              ],
            },
            "MTLS_ROOT_CA_NAME": "/cdk/yivi-issue-app/mtls-rootca",
            "OIDC_CLIENT_ID": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthClientIDC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "OIDC_SCOPE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthScopeC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "SESSION_TABLE": Object {
              "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputRefsessionstable9FEB29154441788E",
            },
            "YIVI_API_ACCESS_KEY_ID_ARN": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":secretsmanager:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":secret:/cdk/yivi-issue-app/yivi-api-access-key-id",
                ],
              ],
            },
            "YIVI_API_DEMO": Object {
              "Ref": "SsmParameterValuecdkyiviissueappyiviapidemoC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "YIVI_API_HOST": Object {
              "Ref": "SsmParameterValuecdkyiviissueappyiviapihostC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "YIVI_API_KEY_ARN": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":secretsmanager:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":secret:/cdk/yivi-issue-app/yivi-api-key",
                ],
              ],
            },
            "YIVI_API_SECRET_KEY_ARN": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":secretsmanager:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":secret:/cdk/yivi-issue-app/yivi-api-secret-key",
                ],
              ],
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:aws:lambda:",
                Object {
                  "Ref": "AWS::Region",
                },
                ":580247275435:layer:LambdaInsightsExtension:16",
              ],
            ],
          },
        ],
        "MemorySize": 512,
        "Role": Object {
          "Fn::GetAtt": Array [
            "yiviissueissuefunctionlambdaServiceRole7E017D84",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "yiviissueissuefunctionlambdaLogRetentionE169A59E": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "yiviissueissuefunctionlambda1C2A36A2",
              },
            ],
          ],
        },
        "RetentionInDays": 30,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "yiviissueissuefunctionlambdaServiceRole7E017D84": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueissuefunctionlambdaServiceRoleDefaultPolicy52F594EF": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::ImportValue": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":secret:/cdk/yivi-issue-app/mtls-privatekey-??????",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "ssm:DescribeParameters",
                "ssm:GetParameters",
                "ssm:GetParameter",
                "ssm:GetParameterHistory",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":ssm:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":parameter/cdk/yivi-issue-app/mtls-clientcert",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "ssm:DescribeParameters",
                "ssm:GetParameters",
                "ssm:GetParameter",
                "ssm:GetParameterHistory",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":ssm:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":parameter/cdk/yivi-issue-app/mtls-rootca",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":secret:/cdk/yivi-issue-app/yivi-api-access-key-id-??????",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":secret:/cdk/yivi-issue-app/yivi-api-secret-key-??????",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":secretsmanager:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":secret:/cdk/yivi-issue-app/yivi-api-key-??????",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueissuefunctionlambdaServiceRoleDefaultPolicy52F594EF",
        "Roles": Array [
          Object {
            "Ref": "yiviissueissuefunctionlambdaServiceRole7E017D84",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueissuefunctionreadpolicy60E04DB6": Object {
      "Properties": Object {
        "Description": "",
        "Path": "/",
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "lambda:List*",
                "lambda:GetAccountSettings",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "lambda:Get*",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueissuefunctionlambda1C2A36A2",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:Get*",
                "logs:List*",
                "logs:StartQuery",
                "logs:StopQuery",
                "logs:TestMetricFilter",
                "logs:FilterLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Fn::GetAtt": Array [
                        "yiviissueissuefunctionlambdaLogRetentionE169A59E",
                        "LogGroupName",
                      ],
                    },
                    ":*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:List*",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "yiviissueissuefunctionyiviissueappyiviissueissuefunctionalarm277AB87D": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AlarmDescription": "This alarm triggers if the function yivi-issue-issue-function is logging more than 5 errors over n minutes.",
        "AlarmName": "Increased error rate for yivi-issue-issue-function",
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "EvaluationPeriods": 3,
        "MetricName": "Errors",
        "Namespace": "yivi-issue-app/yivi-issue-issue-function",
        "Period": 300,
        "Statistic": "Sum",
        "Threshold": 5,
      },
      "Type": "AWS::CloudWatch::Alarm",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueloginfunctionMetricFilterB6A7F507": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "FilterPattern": "\\"ERROR\\"",
        "LogGroupName": Object {
          "Fn::GetAtt": Array [
            "yiviissueloginfunctionlambdaLogRetention22EE9992",
            "LogGroupName",
          ],
        },
        "MetricTransformations": Array [
          Object {
            "MetricName": "Errors",
            "MetricNamespace": "yivi-issue-app/yivi-issue-login-function",
            "MetricValue": "1",
          },
        ],
      },
      "Type": "AWS::Logs::MetricFilter",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueloginfunctionlambda541A4BA9": Object {
      "DependsOn": Array [
        "yiviissueloginfunctionlambdaServiceRoleDefaultPolicyD4963559",
        "yiviissueloginfunctionlambdaServiceRoleD6DA04DA",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "a0cc61c1a637f1e97c8dc2168f927a46e471a498c6a0fe8eae6ac376c0f5a46f.zip",
        },
        "Description": "Login-pagina voor de YIVI issue-applicatie.",
        "Environment": Object {
          "Variables": Object {
            "APPLICATION_URL_BASE": "https://snapshot-tests.nijmegen.nl/",
            "AUTH_URL_BASE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthUrlBaseC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "OIDC_CLIENT_ID": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthClientIDC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "OIDC_SCOPE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthScopeC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "SESSION_TABLE": Object {
              "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputRefsessionstable9FEB29154441788E",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:aws:lambda:",
                Object {
                  "Ref": "AWS::Region",
                },
                ":580247275435:layer:LambdaInsightsExtension:16",
              ],
            ],
          },
        ],
        "MemorySize": 512,
        "Role": Object {
          "Fn::GetAtt": Array [
            "yiviissueloginfunctionlambdaServiceRoleD6DA04DA",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "yiviissueloginfunctionlambdaLogRetention22EE9992": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "yiviissueloginfunctionlambda541A4BA9",
              },
            ],
          ],
        },
        "RetentionInDays": 30,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "yiviissueloginfunctionlambdaServiceRoleD6DA04DA": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueloginfunctionlambdaServiceRoleDefaultPolicyD4963559": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::ImportValue": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueloginfunctionlambdaServiceRoleDefaultPolicyD4963559",
        "Roles": Array [
          Object {
            "Ref": "yiviissueloginfunctionlambdaServiceRoleD6DA04DA",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueloginfunctionreadpolicyEC46C9B3": Object {
      "Properties": Object {
        "Description": "",
        "Path": "/",
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "lambda:List*",
                "lambda:GetAccountSettings",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "lambda:Get*",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueloginfunctionlambda541A4BA9",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:Get*",
                "logs:List*",
                "logs:StartQuery",
                "logs:StopQuery",
                "logs:TestMetricFilter",
                "logs:FilterLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Fn::GetAtt": Array [
                        "yiviissueloginfunctionlambdaLogRetention22EE9992",
                        "LogGroupName",
                      ],
                    },
                    ":*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:List*",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "yiviissueloginfunctionyiviissueappyiviissueloginfunctionalarm602E64FA": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AlarmDescription": "This alarm triggers if the function yivi-issue-login-function is logging more than 5 errors over n minutes.",
        "AlarmName": "Increased error rate for yivi-issue-login-function",
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "EvaluationPeriods": 3,
        "MetricName": "Errors",
        "Namespace": "yivi-issue-app/yivi-issue-login-function",
        "Period": 300,
        "Statistic": "Sum",
        "Threshold": 5,
      },
      "Type": "AWS::CloudWatch::Alarm",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissuelogoutfunctionMetricFilterC69B8E97": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "FilterPattern": "\\"ERROR\\"",
        "LogGroupName": Object {
          "Fn::GetAtt": Array [
            "yiviissuelogoutfunctionlambdaLogRetention8ECA8ED5",
            "LogGroupName",
          ],
        },
        "MetricTransformations": Array [
          Object {
            "MetricName": "Errors",
            "MetricNamespace": "yivi-issue-app/yivi-issue-logout-function",
            "MetricValue": "1",
          },
        ],
      },
      "Type": "AWS::Logs::MetricFilter",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissuelogoutfunctionlambda54F6F1E2": Object {
      "DependsOn": Array [
        "yiviissuelogoutfunctionlambdaServiceRoleDefaultPolicy47AECD93",
        "yiviissuelogoutfunctionlambdaServiceRoleC23808E3",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "f3ae80a9fa2b3d7c2d2a912497747850dc0a7665b97e4adf6de9c82f3e561651.zip",
        },
        "Description": "Uitlog-pagina voor de YIVI issue-applicatie.",
        "Environment": Object {
          "Variables": Object {
            "APPLICATION_URL_BASE": "https://snapshot-tests.nijmegen.nl/",
            "AUTH_URL_BASE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthUrlBaseC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "OIDC_CLIENT_ID": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthClientIDC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "OIDC_SCOPE": Object {
              "Ref": "SsmParameterValuecdkyiviissueappauthScopeC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "SESSION_TABLE": Object {
              "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputRefsessionstable9FEB29154441788E",
            },
          },
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:aws:lambda:",
                Object {
                  "Ref": "AWS::Region",
                },
                ":580247275435:layer:LambdaInsightsExtension:16",
              ],
            ],
          },
        ],
        "MemorySize": 512,
        "Role": Object {
          "Fn::GetAtt": Array [
            "yiviissuelogoutfunctionlambdaServiceRoleC23808E3",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "yiviissuelogoutfunctionlambdaLogRetention8ECA8ED5": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "yiviissuelogoutfunctionlambda54F6F1E2",
              },
            ],
          ],
        },
        "RetentionInDays": 30,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "yiviissuelogoutfunctionlambdaServiceRoleC23808E3": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/CloudWatchLambdaInsightsExecutionRolePolicy",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissuelogoutfunctionlambdaServiceRoleDefaultPolicy47AECD93": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::ImportValue": "api-stage-snapshot-key-stack:ExportsOutputFnGetAttkmskey6257DE3DArnF7CD15EC",
              },
            },
            Object {
              "Action": Array [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::ImportValue": "api-stage-snapshot-sessions-stack:ExportsOutputFnGetAttsessionstable9FEB2915Arn94F05FDE",
                },
                Object {
                  "Ref": "AWS::NoValue",
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissuelogoutfunctionlambdaServiceRoleDefaultPolicy47AECD93",
        "Roles": Array [
          Object {
            "Ref": "yiviissuelogoutfunctionlambdaServiceRoleC23808E3",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissuelogoutfunctionreadpolicyD825DFDF": Object {
      "Properties": Object {
        "Description": "",
        "Path": "/",
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "lambda:List*",
                "lambda:GetAccountSettings",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "lambda:Get*",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissuelogoutfunctionlambda54F6F1E2",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:Get*",
                "logs:List*",
                "logs:StartQuery",
                "logs:StopQuery",
                "logs:TestMetricFilter",
                "logs:FilterLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Fn::GetAtt": Array [
                        "yiviissuelogoutfunctionlambdaLogRetention8ECA8ED5",
                        "LogGroupName",
                      ],
                    },
                    ":*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:Describe*",
                "logs:List*",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "yiviissuelogoutfunctionyiviissueappyiviissuelogoutfunctionalarm49AB04F5": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AlarmDescription": "This alarm triggers if the function yivi-issue-logout-function is logging more than 5 errors over n minutes.",
        "AlarmName": "Increased error rate for yivi-issue-logout-function",
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "EvaluationPeriods": 3,
        "MetricName": "Errors",
        "Namespace": "yivi-issue-app/yivi-issue-logout-function",
        "Period": 300,
        "Statistic": "Sum",
        "Threshold": 5,
      },
      "Type": "AWS::CloudWatch::Alarm",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 7`] = `
Object {
  "Mappings": Object {
    "AWSCloudFrontPartitionHostedZoneIdMap": Object {
      "aws": Object {
        "zoneId": "Z2FDTNDATAQYW2",
      },
      "aws-cn": Object {
        "zoneId": "Z3RFFRIM2A3IF5",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappyiviapihostC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/yivi-api-host",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappzoneidC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/zone/id",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappzonenameC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/zone/name",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691": Object {
      "DependsOn": Array [
        "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36",
        "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
      ],
      "Properties": Object {
        "Code": Object {
          "ZipFile": "import boto3  # type: ignore
import json
import logging
import urllib.request

s3 = boto3.client(\\"s3\\")

EVENTBRIDGE_CONFIGURATION = 'EventBridgeConfiguration'

CONFIGURATION_TYPES = [\\"TopicConfigurations\\", \\"QueueConfigurations\\", \\"LambdaFunctionConfigurations\\"]

def handler(event: dict, context):
  response_status = \\"SUCCESS\\"
  error_message = \\"\\"
  try:
    props = event[\\"ResourceProperties\\"]
    bucket = props[\\"BucketName\\"]
    notification_configuration = props[\\"NotificationConfiguration\\"]
    request_type = event[\\"RequestType\\"]
    managed = props.get('Managed', 'true').lower() == 'true'
    stack_id = event['StackId']

    if managed:
      config = handle_managed(request_type, notification_configuration)
    else:
      config = handle_unmanaged(bucket, stack_id, request_type, notification_configuration)

    put_bucket_notification_configuration(bucket, config)
  except Exception as e:
    logging.exception(\\"Failed to put bucket notification configuration\\")
    response_status = \\"FAILED\\"
    error_message = f\\"Error: {str(e)}. \\"
  finally:
    submit_response(event, context, response_status, error_message)

def handle_managed(request_type, notification_configuration):
  if request_type == 'Delete':
    return {}
  return notification_configuration

def handle_unmanaged(bucket, stack_id, request_type, notification_configuration):
  external_notifications = find_external_notifications(bucket, stack_id)

  if request_type == 'Delete':
    return external_notifications

  def with_id(notification):
    notification['Id'] = f\\"{stack_id}-{hash(json.dumps(notification, sort_keys=True))}\\"
    return notification

  notifications = {}
  for t in CONFIGURATION_TYPES:
    external = external_notifications.get(t, [])
    incoming = [with_id(n) for n in notification_configuration.get(t, [])]
    notifications[t] = external + incoming

  if EVENTBRIDGE_CONFIGURATION in notification_configuration:
    notifications[EVENTBRIDGE_CONFIGURATION] = notification_configuration[EVENTBRIDGE_CONFIGURATION]
  elif EVENTBRIDGE_CONFIGURATION in external_notifications:
    notifications[EVENTBRIDGE_CONFIGURATION] = external_notifications[EVENTBRIDGE_CONFIGURATION]

  return notifications

def find_external_notifications(bucket, stack_id):
  existing_notifications = get_bucket_notification_configuration(bucket)
  external_notifications = {}
  for t in CONFIGURATION_TYPES:
    external_notifications[t] = [n for n in existing_notifications.get(t, []) if not n['Id'].startswith(f\\"{stack_id}-\\")]

  if EVENTBRIDGE_CONFIGURATION in existing_notifications:
    external_notifications[EVENTBRIDGE_CONFIGURATION] = existing_notifications[EVENTBRIDGE_CONFIGURATION]

  return external_notifications

def get_bucket_notification_configuration(bucket):
  return s3.get_bucket_notification_configuration(Bucket=bucket)

def put_bucket_notification_configuration(bucket, notification_configuration):
  s3.put_bucket_notification_configuration(Bucket=bucket, NotificationConfiguration=notification_configuration)

def submit_response(event: dict, context, response_status: str, error_message: str):
  response_body = json.dumps(
    {
      \\"Status\\": response_status,
      \\"Reason\\": f\\"{error_message}See the details in CloudWatch Log Stream: {context.log_stream_name}\\",
      \\"PhysicalResourceId\\": event.get(\\"PhysicalResourceId\\") or event[\\"LogicalResourceId\\"],
      \\"StackId\\": event[\\"StackId\\"],
      \\"RequestId\\": event[\\"RequestId\\"],
      \\"LogicalResourceId\\": event[\\"LogicalResourceId\\"],
      \\"NoEcho\\": False,
    }
  ).encode(\\"utf-8\\")
  headers = {\\"content-type\\": \\"\\", \\"content-length\\": str(len(response_body))}
  try:
    req = urllib.request.Request(url=event[\\"ResponseURL\\"], headers=headers, data=response_body, method=\\"PUT\\")
    with urllib.request.urlopen(req) as response:
      print(response.read().decode(\\"utf-8\\"))
    print(\\"Status code: \\" + response.reason)
  except Exception as e:
      print(\\"send(..) failed executing request.urlopen(..): \\" + str(e))
",
        },
        "Description": "AWS CloudFormation handler for \\"Custom::S3BucketNotifications\\" resources (@aws-cdk/aws-s3)",
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
            "Arn",
          ],
        },
        "Runtime": "python3.9",
        "Timeout": 300,
      },
      "Type": "AWS::Lambda::Function",
    },
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:PutBucketNotification",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36",
        "Roles": Array [
          Object {
            "Ref": "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CloudfrontLogs7FFCD299": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "LifecycleConfiguration": Object {
          "Rules": Array [
            Object {
              "ExpirationInDays": 180,
              "Id": "delete objects after 180 days",
              "Status": "Enabled",
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "CloudfrontLogsNotificationsD110D18C": Object {
      "Properties": Object {
        "BucketName": Object {
          "Ref": "CloudfrontLogs7FFCD299",
        },
        "Managed": true,
        "NotificationConfiguration": Object {
          "EventBridgeConfiguration": Object {},
        },
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691",
            "Arn",
          ],
        },
      },
      "Type": "Custom::S3BucketNotifications",
    },
    "CloudfrontLogsPolicy4B38713A": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "CloudfrontLogs7FFCD299",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "CloudfrontLogs7FFCD299",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "CloudfrontLogs7FFCD299",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536": Object {
      "DependsOn": Array [
        "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
        "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "2bc265c5e0569aeb24a6349c15bd54e76e845892376515e036627ab0cc70bb64.zip",
        },
        "Handler": "index.handler",
        "Layers": Array [
          Object {
            "Ref": "staticResourcesAwsCliLayer07A04ABC",
          },
        ],
        "Role": Object {
          "Fn::GetAtt": Array [
            "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265",
            "Arn",
          ],
        },
        "Runtime": "python3.9",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":s3:::",
                      Object {
                        "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":s3:::",
                      Object {
                        "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "resourcesbucket8DBB515A",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "resourcesbucket8DBB515A",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "cloudfront:GetInvalidation",
                "cloudfront:CreateInvalidation",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
        "Roles": Array [
          Object {
            "Ref": "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": Object {
      "DependsOn": Array [
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "e45ee2082d227db1b6f0292696ce5ce2b061c105d15efb341925ca040d1feb68.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:PutRetentionPolicy",
                "logs:DeleteRetentionPolicy",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "Roles": Array [
          Object {
            "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "aaaarecord09CB0D1A": Object {
      "Properties": Object {
        "AliasTarget": Object {
          "DNSName": Object {
            "Fn::GetAtt": Array [
              "cfdistributionC7035EBF",
              "DomainName",
            ],
          },
          "HostedZoneId": Object {
            "Fn::FindInMap": Array [
              "AWSCloudFrontPartitionHostedZoneIdMap",
              Object {
                "Ref": "AWS::Partition",
              },
              "zoneId",
            ],
          },
        },
        "HostedZoneId": Object {
          "Ref": "SsmParameterValuecdkyiviissueappzoneidC96584B6F00A464EAD1953AFF4B05118Parameter",
        },
        "Name": Object {
          "Fn::Join": Array [
            "",
            Array [
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappzonenameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              ".",
            ],
          ],
        },
        "Type": "AAAA",
      },
      "Type": "AWS::Route53::RecordSet",
    },
    "arecordFEB8F42A": Object {
      "Properties": Object {
        "AliasTarget": Object {
          "DNSName": Object {
            "Fn::GetAtt": Array [
              "cfdistributionC7035EBF",
              "DomainName",
            ],
          },
          "HostedZoneId": Object {
            "Fn::FindInMap": Array [
              "AWSCloudFrontPartitionHostedZoneIdMap",
              Object {
                "Ref": "AWS::Partition",
              },
              "zoneId",
            ],
          },
        },
        "HostedZoneId": Object {
          "Ref": "SsmParameterValuecdkyiviissueappzoneidC96584B6F00A464EAD1953AFF4B05118Parameter",
        },
        "Name": Object {
          "Fn::Join": Array [
            "",
            Array [
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappzonenameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              ".",
            ],
          ],
        },
        "Type": "A",
      },
      "Type": "AWS::Route53::RecordSet",
    },
    "cfcaching542C3664": Object {
      "Properties": Object {
        "CachePolicyConfig": Object {
          "DefaultTTL": 0,
          "MaxTTL": 1,
          "MinTTL": 0,
          "Name": "cfCachingSessionsYiviIssueApp",
          "ParametersInCacheKeyAndForwardedToOrigin": Object {
            "CookiesConfig": Object {
              "CookieBehavior": "all",
            },
            "EnableAcceptEncodingBrotli": false,
            "EnableAcceptEncodingGzip": false,
            "HeadersConfig": Object {
              "HeaderBehavior": "whitelist",
              "Headers": Array [
                "Authorization",
              ],
            },
            "QueryStringsConfig": Object {
              "QueryStringBehavior": "all",
            },
          },
        },
      },
      "Type": "AWS::CloudFront::CachePolicy",
    },
    "cfdistributionC7035EBF": Object {
      "Properties": Object {
        "DistributionConfig": Object {
          "Aliases": Array [
            Object {
              "Ref": "SsmParameterValuecdkyiviissueappzonenameC96584B6F00A464EAD1953AFF4B05118Parameter",
            },
            "snapshot-tests.nijmegen.nl",
          ],
          "CacheBehaviors": Array [
            Object {
              "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
              "Compress": true,
              "PathPattern": "/static/*",
              "TargetOriginId": "apistagesnapshotcloudfrontstackcfdistributionOrigin2CF0C613E",
              "ViewerProtocolPolicy": "redirect-to-https",
            },
          ],
          "Comment": "YIVI issue app",
          "CustomErrorResponses": Array [
            Object {
              "ErrorCode": 403,
              "ResponseCode": 403,
              "ResponsePagePath": "/static/http-errors/403.html",
            },
            Object {
              "ErrorCode": 404,
              "ResponseCode": 404,
              "ResponsePagePath": "/static/http-errors/404.html",
            },
            Object {
              "ErrorCode": 500,
              "ResponseCode": 500,
              "ResponsePagePath": "/static/http-errors/500.html",
            },
            Object {
              "ErrorCode": 503,
              "ResponseCode": 503,
              "ResponsePagePath": "/static/http-errors/503.html",
            },
          ],
          "DefaultCacheBehavior": Object {
            "AllowedMethods": Array [
              "GET",
              "HEAD",
              "OPTIONS",
              "PUT",
              "PATCH",
              "POST",
              "DELETE",
            ],
            "CachePolicyId": Object {
              "Ref": "cfcaching542C3664",
            },
            "Compress": true,
            "OriginRequestPolicyId": Object {
              "Ref": "cforiginrequestpolicy80A90261",
            },
            "ResponseHeadersPolicyId": Object {
              "Ref": "headersBEE0BB4D",
            },
            "TargetOriginId": "apistagesnapshotcloudfrontstackcfdistributionOrigin127CBC36D",
            "ViewerProtocolPolicy": "redirect-to-https",
          },
          "DefaultRootObject": "issue",
          "Enabled": true,
          "HttpVersion": "http2",
          "IPV6Enabled": true,
          "Logging": Object {
            "Bucket": Object {
              "Fn::GetAtt": Array [
                "CloudfrontLogs7FFCD299",
                "RegionalDomainName",
              ],
            },
          },
          "Origins": Array [
            Object {
              "CustomOriginConfig": Object {
                "OriginProtocolPolicy": "https-only",
                "OriginSSLProtocols": Array [
                  "TLSv1.2",
                ],
              },
              "DomainName": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::ImportValue": "api-stage-snapshot-api-stack:ExportsOutputRefyiviissueapiE2472BD5F75B43B2",
                    },
                    ".execute-api.",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ".",
                    Object {
                      "Ref": "AWS::URLSuffix",
                    },
                  ],
                ],
              },
              "Id": "apistagesnapshotcloudfrontstackcfdistributionOrigin127CBC36D",
            },
            Object {
              "DomainName": Object {
                "Fn::GetAtt": Array [
                  "resourcesbucket8DBB515A",
                  "RegionalDomainName",
                ],
              },
              "Id": "apistagesnapshotcloudfrontstackcfdistributionOrigin2CF0C613E",
              "S3OriginConfig": Object {
                "OriginAccessIdentity": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "origin-access-identity/cloudfront/",
                      Object {
                        "Ref": "publicresourcesbucketoiaECDADD0D",
                      },
                    ],
                  ],
                },
              },
            },
          ],
          "PriceClass": "PriceClass_100",
          "ViewerCertificate": Object {
            "AcmCertificateArn": Object {
              "Fn::GetAtt": Array [
                "paramsSsmParameters67EAF4AF",
                "/cdk/yivi-issue-app/certificates/certificate-arn",
              ],
            },
            "MinimumProtocolVersion": "TLSv1.2_2021",
            "SslSupportMethod": "sni-only",
          },
          "WebACLId": Object {
            "Fn::GetAtt": Array [
              "wafparamsSsmParametersFEAA8890",
              "/cdk/yivi-issue-app/waf/acl-arn",
            ],
          },
        },
      },
      "Type": "AWS::CloudFront::Distribution",
    },
    "cforiginrequestpolicy80A90261": Object {
      "Properties": Object {
        "OriginRequestPolicyConfig": Object {
          "CookiesConfig": Object {
            "CookieBehavior": "none",
          },
          "HeadersConfig": Object {
            "HeaderBehavior": "whitelist",
            "Headers": Array [
              "Accept-Charset",
              "Origin",
              "Accept",
              "Referer",
              "Accept-Language",
              "Accept-Datetime",
              "Authoriz",
            ],
          },
          "Name": "cfOriginRequestPolicyYiviIssueApp",
          "QueryStringsConfig": Object {
            "QueryStringBehavior": "none",
          },
        },
      },
      "Type": "AWS::CloudFront::OriginRequestPolicy",
    },
    "headersBEE0BB4D": Object {
      "Properties": Object {
        "ResponseHeadersPolicyConfig": Object {
          "Name": "apistagesnapshotcloudfrontstackheadersD1ED6DE3",
          "SecurityHeadersConfig": Object {
            "ContentSecurityPolicy": Object {
              "ContentSecurityPolicy": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "default-src 'self'; frame-ancestors 'self'; frame-src 'self'; connect-src 'self' https://componenten.nijmegen.nl https://",
                    Object {
                      "Ref": "SsmParameterValuecdkyiviissueappyiviapihostC96584B6F00A464EAD1953AFF4B05118Parameter",
                    },
                    "; style-src 'self' https://componenten.nijmegen.nl https://fonts.googleapis.com https://fonts.gstatic.com 'sha256-hS1LM/30PjUBJK3kBX9Vm9eOAhQNCiNhf/SCDnUqu14=' 'sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=' 'sha256-OTeu7NEHDo6qutIWo0F2TmYrDhsKWCzrUgGoxxHGJ8o='; script-src 'self' https://componenten.nijmegen.nl https://siteimproveanalytics.com; font-src 'self' https://componenten.nijmegen.nl https://fonts.gstatic.com; img-src 'self' https://componenten.nijmegen.nl data: https://*.siteimproveanalytics.io; object-src 'none';",
                  ],
                ],
              },
              "Override": true,
            },
            "ContentTypeOptions": Object {
              "Override": true,
            },
            "FrameOptions": Object {
              "FrameOption": "DENY",
              "Override": true,
            },
            "ReferrerPolicy": Object {
              "Override": true,
              "ReferrerPolicy": "no-referrer",
            },
            "StrictTransportSecurity": Object {
              "AccessControlMaxAgeSec": 31622400,
              "IncludeSubdomains": true,
              "Override": true,
            },
          },
        },
      },
      "Type": "AWS::CloudFront::ResponseHeadersPolicy",
    },
    "paramsMyHandlerDD014AA5": Object {
      "DependsOn": Array [
        "paramsMyHandlerServiceRoleDefaultPolicy19EAD401",
        "paramsMyHandlerServiceRole702761FB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3.zip",
        },
        "Handler": "remote-parameters.on_event",
        "Role": Object {
          "Fn::GetAtt": Array [
            "paramsMyHandlerServiceRole702761FB",
            "Arn",
          ],
        },
        "Runtime": "python3.8",
      },
      "Type": "AWS::Lambda::Function",
    },
    "paramsMyHandlerServiceRole702761FB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "paramsMyHandlerServiceRoleDefaultPolicy19EAD401": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "ssm:GetParametersByPath",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "paramsMyHandlerServiceRoleDefaultPolicy19EAD401",
        "Roles": Array [
          Object {
            "Ref": "paramsMyHandlerServiceRole702761FB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "paramsMyProviderframeworkonEvent1CA04C43": Object {
      "DependsOn": Array [
        "paramsMyProviderframeworkonEventServiceRoleDefaultPolicy334F6117",
        "paramsMyProviderframeworkonEventServiceRole14F11254",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b.zip",
        },
        "Description": "AWS CDK resource provider framework - onEvent (api-stage-snapshot/cloudfront-stack/params/MyProvider)",
        "Environment": Object {
          "Variables": Object {
            "USER_ON_EVENT_FUNCTION_ARN": Object {
              "Fn::GetAtt": Array [
                "paramsMyHandlerDD014AA5",
                "Arn",
              ],
            },
          },
        },
        "Handler": "framework.onEvent",
        "Role": Object {
          "Fn::GetAtt": Array [
            "paramsMyProviderframeworkonEventServiceRole14F11254",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "paramsMyProviderframeworkonEventLogRetention9FFA785A": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "paramsMyProviderframeworkonEvent1CA04C43",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "paramsMyProviderframeworkonEventServiceRole14F11254": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "paramsMyProviderframeworkonEventServiceRoleDefaultPolicy334F6117": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "paramsMyHandlerDD014AA5",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "paramsMyHandlerDD014AA5",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "paramsMyProviderframeworkonEventServiceRoleDefaultPolicy334F6117",
        "Roles": Array [
          Object {
            "Ref": "paramsMyProviderframeworkonEventServiceRole14F11254",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "paramsSsmParameters67EAF4AF": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "paramsMyProviderframeworkonEvent1CA04C43",
            "Arn",
          ],
        },
        "parameterPath": "/cdk/yivi-issue-app/certificates/",
        "regionName": "us-east-1",
        "stackName": "api-stage-snapshot-cloudfront-stack",
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
    "publicresourcesbucketoiaECDADD0D": Object {
      "Properties": Object {
        "CloudFrontOriginAccessIdentityConfig": Object {
          "Comment": "Allows CloudFront to reach the bucket",
        },
      },
      "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
    },
    "resourcesbucket8DBB515A": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "aws-cdk:cr-owned:89a6282a",
            "Value": "true",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "resourcesbucketNotificationsB82B70A2": Object {
      "Properties": Object {
        "BucketName": Object {
          "Ref": "resourcesbucket8DBB515A",
        },
        "Managed": true,
        "NotificationConfiguration": Object {
          "EventBridgeConfiguration": Object {},
        },
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691",
            "Arn",
          ],
        },
      },
      "Type": "Custom::S3BucketNotifications",
    },
    "resourcesbucketPolicy5881FF0E": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "resourcesbucket8DBB515A",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "resourcesbucket8DBB515A",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "resourcesbucket8DBB515A",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:GetObject",
                "s3:ListBucket",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "CanonicalUser": Object {
                  "Fn::GetAtt": Array [
                    "publicresourcesbucketoiaECDADD0D",
                    "S3CanonicalUserId",
                  ],
                },
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "resourcesbucket8DBB515A",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "resourcesbucket8DBB515A",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "s3:GetObject",
              "Effect": "Allow",
              "Principal": Object {
                "CanonicalUser": Object {
                  "Fn::GetAtt": Array [
                    "publicresourcesbucketoiaECDADD0D",
                    "S3CanonicalUserId",
                  ],
                },
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "resourcesbucket8DBB515A",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "staticResourcesAwsCliLayer07A04ABC": Object {
      "Properties": Object {
        "Content": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "5d8d1d0aacea23824c62f362e1e3c14b7dd14a31c71b53bfae4d14a6373c5510.zip",
        },
        "Description": "/opt/awscli/aws",
      },
      "Type": "AWS::Lambda::LayerVersion",
    },
    "staticResourcesCustomResource6B7011F1": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "DestinationBucketName": Object {
          "Ref": "resourcesbucket8DBB515A",
        },
        "DistributionId": Object {
          "Ref": "cfdistributionC7035EBF",
        },
        "DistributionPaths": Array [
          "/static/*",
        ],
        "Prune": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536",
            "Arn",
          ],
        },
        "SourceBucketNames": Array [
          Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
        ],
        "SourceObjectKeys": Array [
          "2cb20f056288eab17dffbc00805a8b5b5e51b48937e54f722347b6b1b8b97137.zip",
        ],
      },
      "Type": "Custom::CDKBucketDeployment",
      "UpdateReplacePolicy": "Delete",
    },
    "wafparamsMyHandler392DAE06": Object {
      "DependsOn": Array [
        "wafparamsMyHandlerServiceRoleDefaultPolicy1CB811EF",
        "wafparamsMyHandlerServiceRole3DD5FAA2",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3.zip",
        },
        "Handler": "remote-parameters.on_event",
        "Role": Object {
          "Fn::GetAtt": Array [
            "wafparamsMyHandlerServiceRole3DD5FAA2",
            "Arn",
          ],
        },
        "Runtime": "python3.8",
      },
      "Type": "AWS::Lambda::Function",
    },
    "wafparamsMyHandlerServiceRole3DD5FAA2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "wafparamsMyHandlerServiceRoleDefaultPolicy1CB811EF": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "ssm:GetParametersByPath",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "wafparamsMyHandlerServiceRoleDefaultPolicy1CB811EF",
        "Roles": Array [
          Object {
            "Ref": "wafparamsMyHandlerServiceRole3DD5FAA2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "wafparamsMyProviderframeworkonEvent54FA48DC": Object {
      "DependsOn": Array [
        "wafparamsMyProviderframeworkonEventServiceRoleDefaultPolicy206B0D96",
        "wafparamsMyProviderframeworkonEventServiceRoleFD87CBE8",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b.zip",
        },
        "Description": "AWS CDK resource provider framework - onEvent (api-stage-snapshot/cloudfront-stack/waf-params/MyProvider)",
        "Environment": Object {
          "Variables": Object {
            "USER_ON_EVENT_FUNCTION_ARN": Object {
              "Fn::GetAtt": Array [
                "wafparamsMyHandler392DAE06",
                "Arn",
              ],
            },
          },
        },
        "Handler": "framework.onEvent",
        "Role": Object {
          "Fn::GetAtt": Array [
            "wafparamsMyProviderframeworkonEventServiceRoleFD87CBE8",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "wafparamsMyProviderframeworkonEventLogRetention277D342E": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/lambda/",
              Object {
                "Ref": "wafparamsMyProviderframeworkonEvent54FA48DC",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "wafparamsMyProviderframeworkonEventServiceRoleDefaultPolicy206B0D96": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "wafparamsMyHandler392DAE06",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "wafparamsMyHandler392DAE06",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "wafparamsMyProviderframeworkonEventServiceRoleDefaultPolicy206B0D96",
        "Roles": Array [
          Object {
            "Ref": "wafparamsMyProviderframeworkonEventServiceRoleFD87CBE8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "wafparamsMyProviderframeworkonEventServiceRoleFD87CBE8": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "wafparamsSsmParametersFEAA8890": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "wafparamsMyProviderframeworkonEvent54FA48DC",
            "Arn",
          ],
        },
        "parameterPath": "/cdk/yivi-issue-app/waf/",
        "regionName": "us-east-1",
        "stackName": "api-stage-snapshot-cloudfront-stack",
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 8`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValuecdkyiviissueappstatisticsloggroupnameC96584B6F00A464EAD1953AFF4B05118Parameter": Object {
      "Default": "/cdk/yivi-issue-app/statistics/log-group-name",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "dashboardC616E8C4": Object {
      "Properties": Object {
        "DashboardBody": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"widgets\\":[{\\"type\\":\\"log\\",\\"width\\":24,\\"height\\":6,\\"x\\":0,\\"y\\":0,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Issue events per hour\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"query\\":\\"SOURCE '",
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappstatisticsloggroupnameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              "' | fields success =  1 as r1, success = 0 as r2\\\\n| filter not isempty(subject)\\\\n| stats sum(r1) as successful, sum(r2) as failed by bin(1h)\\",\\"stacked\\":false}},{\\"type\\":\\"log\\",\\"width\\":8,\\"height\\":12,\\"x\\":0,\\"y\\":6,\\"properties\\":{\\"view\\":\\"pie\\",\\"title\\":\\"Issue events per gemeente\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"query\\":\\"SOURCE '",
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappstatisticsloggroupnameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              "' | fields subject, gemeente\\\\n| filter not isempty(subject)\\\\n| stats count(subject) as counts by gemeente\\\\n| sort gemeente\\"}},{\\"type\\":\\"log\\",\\"width\\":8,\\"height\\":12,\\"x\\":8,\\"y\\":6,\\"properties\\":{\\"view\\":\\"table\\",\\"title\\":\\"Issue events per gemeente\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"query\\":\\"SOURCE '",
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappstatisticsloggroupnameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              "' | fields subject, gemeente\\\\n| filter not isempty(subject)\\\\n| stats count(subject) as counts by gemeente\\\\n| sort gemeente\\"}},{\\"type\\":\\"log\\",\\"width\\":8,\\"height\\":12,\\"x\\":16,\\"y\\":6,\\"properties\\":{\\"view\\":\\"table\\",\\"title\\":\\"Multiple issue subjects\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"query\\":\\"SOURCE '",
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappstatisticsloggroupnameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              "' | fields gemeente\\\\n| filter not isempty(subject) and nr_of_issues_per_subject > 1\\\\n| stats count(subject) as nr_of_issues_per_subject by gemeente, subject\\"}},{\\"type\\":\\"log\\",\\"width\\":8,\\"height\\":12,\\"x\\":0,\\"y\\":18,\\"properties\\":{\\"view\\":\\"table\\",\\"title\\":\\"Errors and occurences\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"query\\":\\"SOURCE '",
              Object {
                "Ref": "SsmParameterValuecdkyiviissueappstatisticsloggroupnameC96584B6F00A464EAD1953AFF4B05118Parameter",
              },
              "' | fields error, nr_of_occurences\\\\n| stats count(error) as nr_of_occurences by error\\\\n| filter not isempty(subject) and not isempty(error) and error not like \\\\\\"undefined\\\\\\"\\"}}]}",
            ],
          ],
        },
        "DashboardName": "YIVI-issue-statistics",
      },
      "Type": "AWS::CloudWatch::Dashboard",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`ApiStage snapshot 9`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "waflogging": Object {
      "Properties": Object {
        "LogDestinationConfigs": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":logs:us-east-1:",
                Object {
                  "Ref": "AWS::AccountId",
                },
                ":log-group:",
                Object {
                  "Ref": "waflogs491765AC",
                },
              ],
            ],
          },
        ],
        "ResourceArn": Object {
          "Fn::GetAtt": Array [
            "wafyiviIssueApp",
            "Arn",
          ],
        },
      },
      "Type": "AWS::WAFv2::LoggingConfiguration",
    },
    "waflogs491765AC": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": "aws-waf-logs-yivi-issue-app",
        "RetentionInDays": 731,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "wafyiviIssueApp": Object {
      "Properties": Object {
        "DefaultAction": Object {
          "Allow": Object {},
        },
        "Description": "used for the yivi issue app",
        "Name": "yiviIssueAppWaf",
        "Rules": Array [
          Object {
            "Name": "AWS-ManagedRulesBotControlRuleSet",
            "OverrideAction": Object {
              "None": Object {},
            },
            "Priority": 0,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "ExcludedRules": Array [
                  Object {
                    "Name": "SignalNonBrowserUserAgent",
                  },
                ],
                "Name": "AWSManagedRulesBotControlRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-ManagedRulesBotControlRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Action": Object {
              "Block": Object {},
            },
            "Name": "BlockMostNonBrowserUserAgents",
            "Priority": 1,
            "RuleLabels": Array [],
            "Statement": Object {
              "AndStatement": Object {
                "Statements": Array [
                  Object {
                    "LabelMatchStatement": Object {
                      "Key": "awswaf:managed:aws:bot-control:signal:non_browser_user_agent",
                      "Scope": "LABEL",
                    },
                  },
                  Object {
                    "NotStatement": Object {
                      "Statement": Object {
                        "ByteMatchStatement": Object {
                          "FieldToMatch": Object {
                            "SingleHeader": Object {
                              "Name": "user-agent",
                            },
                          },
                          "PositionalConstraint": "EXACTLY",
                          "SearchString": "internetnl/1.0",
                          "TextTransformations": Array [
                            Object {
                              "Priority": 0,
                              "Type": "NONE",
                            },
                          ],
                        },
                      },
                    },
                  },
                ],
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-ManagedRulesBotControlRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Action": Object {
              "Count": Object {},
            },
            "Name": "RateBasedStatement",
            "Priority": 10,
            "Statement": Object {
              "RateBasedStatement": Object {
                "AggregateKeyType": "IP",
                "Limit": 500,
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-RateBasedStatement",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWS-AmazonIpReputationList",
            "OverrideAction": Object {
              "None": Object {},
            },
            "Priority": 20,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesAmazonIpReputationList",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AmazonIpReputationList",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWS-AWSManagedRulesCommonRuleSet",
            "OverrideAction": Object {
              "None": Object {},
            },
            "Priority": 30,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesCommonRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesCommonRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
        ],
        "Scope": "CLOUDFRONT",
        "VisibilityConfig": Object {
          "CloudWatchMetricsEnabled": true,
          "MetricName": "yiviIssueApp-web-acl",
          "SampledRequestsEnabled": true,
        },
      },
      "Type": "AWS::WAFv2::WebACL",
    },
    "yiviissueaclid2AF58CF3": Object {
      "Properties": Object {
        "Name": "/cdk/yivi-issue-app/waf/acl-arn",
        "Type": "String",
        "Value": Object {
          "Fn::GetAtt": Array [
            "wafyiviIssueApp",
            "Arn",
          ],
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`Snapshot pipeline 1`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "yiviissueappsnapshottestsAssetsFileAsset10446E0C95": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset10",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapicloudfrontstack5E5974C5.assets.json\\\\\\" --verbose publish \\\\\\"5d8d1d0aacea23824c62f362e1e3c14b7dd14a31c71b53bfae4d14a6373c5510:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset111260C818": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset11",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapicloudfrontstack5E5974C5.assets.json\\\\\\" --verbose publish \\\\\\"2bc265c5e0569aeb24a6349c15bd54e76e845892376515e036627ab0cc70bb64:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset12F38DA3A0": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset12",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapicloudfrontstack5E5974C5.assets.json\\\\\\" --verbose publish \\\\\\"2cb20f056288eab17dffbc00805a8b5b5e51b48937e54f722347b6b1b8b97137:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset1C189BA20": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset1",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapidnssecstack63B0519B.assets.json\\\\\\" --verbose publish \\\\\\"3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3:123456789012-us-east-1\\\\\\"\\",
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapicloudfrontstack5E5974C5.assets.json\\\\\\" --verbose publish \\\\\\"3803df2f6849acf50bb6577ee095a669940670e799f70a2be34893a399777bc3:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset23D32E595": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset2",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapidnssecstack63B0519B.assets.json\\\\\\" --verbose publish \\\\\\"53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b:123456789012-us-east-1\\\\\\"\\",
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapicloudfrontstack5E5974C5.assets.json\\\\\\" --verbose publish \\\\\\"53c95d71cfd280747d971a38505aea07f812fdba75874a090358a2fc4f58f79b:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset3883C457E": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset3",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapidnssecstack63B0519B.assets.json\\\\\\" --verbose publish \\\\\\"e45ee2082d227db1b6f0292696ce5ce2b061c105d15efb341925ca040d1feb68:123456789012-us-east-1\\\\\\"\\",
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.assets.json\\\\\\" --verbose publish \\\\\\"e45ee2082d227db1b6f0292696ce5ce2b061c105d15efb341925ca040d1feb68:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset42365941F": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset4",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapidnssecstack63B0519B.assets.json\\\\\\" --verbose publish \\\\\\"04aae5aa9e9ed5e0aeefb4bbbfb82449ef35f3db68a98770c2e5cc4237666963:123456789012-us-east-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset5B39D4721": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset5",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.assets.json\\\\\\" --verbose publish \\\\\\"a0cc61c1a637f1e97c8dc2168f927a46e471a498c6a0fe8eae6ac376c0f5a46f:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset660E1EEBC": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset6",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.assets.json\\\\\\" --verbose publish \\\\\\"f3ae80a9fa2b3d7c2d2a912497747850dc0a7665b97e4adf6de9c82f3e561651:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset7ECBB555C": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset7",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.assets.json\\\\\\" --verbose publish \\\\\\"7bbb70f9656d472b122f25a4a5b72083b2e96b8320e3b140586e807de0c3645b:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset86049361A": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset8",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.assets.json\\\\\\" --verbose publish \\\\\\"bea8846912bee12661b1c5e9b4f891addc2cfa6d5ae0d9b7be18998a784cf31f:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileAsset98D1014BB": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Assets/FileAsset9",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g cdk-assets@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk-assets --path \\\\\\"assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.assets.json\\\\\\" --verbose publish \\\\\\"157e577662ec8ded282e266cbc3165768940fbedf8ca8118fa335a40331b35e0:123456789012-eu-central-1\\\\\\"\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsAssetsFileRole7BE8EE46": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::test:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueappsnapshottestsAssetsFileRoleDefaultPolicy74A84D42": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:eu-west-1:test:log-group:/aws/codebuild/*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:eu-west-1:test:report-group/*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Sub": "arn:\${AWS::Partition}:iam::123456789012:role/cdk-hnb659fds-file-publishing-role-123456789012-us-east-1",
                },
                Object {
                  "Fn::Sub": "arn:\${AWS::Partition}:iam::123456789012:role/cdk-hnb659fds-file-publishing-role-123456789012-eu-central-1",
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueappsnapshottestsAssetsFileRoleDefaultPolicy74A84D42",
        "Roles": Array [
          Object {
            "Ref": "yiviissueappsnapshottestsAssetsFileRole7BE8EE46",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Condition": Object {
                "Bool": Object {
                  "aws:ViaAWSService": "codepipeline.amazonaws.com",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::test:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueappsnapshottestsCodeBuildActionRoleDefaultPolicy02D66474": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProject0B8C24F6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsUpdatePipelineSelfMutation37599748",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset1C189BA20",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset10446E0C95",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset111260C818",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset12F38DA3A0",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset23D32E595",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset3883C457E",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset42365941F",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset5B39D4721",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset660E1EEBC",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset7ECBB555C",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset86049361A",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsAssetsFileAsset98D1014BB",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueappsnapshottestsCodeBuildActionRoleDefaultPolicy02D66474",
        "Roles": Array [
          Object {
            "Ref": "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::test:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyAlias5B06EA9A": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-testyiviissueappsnapshottestspipelined4e59f2c",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "yiviissueappsnapshottestsPipelineArtifactsBucketPolicy72B35854": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProject0B8C24F6": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/Build/Synth",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "EnvironmentVariables": Array [
            Object {
              "Name": "BRANCH_NAME",
              "Type": "PLAINTEXT",
              "Value": "snapshot-tests",
            },
          ],
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": true,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProjectRole69736EE5",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"build\\": {
      \\"commands\\": [
        \\"yarn install --frozen-lockfile\\",
        \\"npx projen build\\",
        \\"npx projen synth\\"
      ]
    }
  },
  \\"artifacts\\": {
    \\"base-directory\\": \\"cdk.out\\",
    \\"files\\": \\"**/*\\"
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProjectRole69736EE5": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProjectRoleDefaultPolicy7A306C43": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:eu-west-1:test:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProject0B8C24F6",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:eu-west-1:test:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProject0B8C24F6",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:eu-west-1:test:report-group/",
                    Object {
                      "Ref": "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProject0B8C24F6",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProjectRoleDefaultPolicy7A306C43",
        "Roles": Array [
          Object {
            "Ref": "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProjectRole69736EE5",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueappsnapshottestsPipelineF2C83146": Object {
      "DependsOn": Array [
        "yiviissueappsnapshottestsPipelineRoleDefaultPolicyB8DA57DE",
        "yiviissueappsnapshottestsPipelineRoleECC5AD0C",
      ],
      "Properties": Object {
        "ArtifactStores": Array [
          Object {
            "ArtifactStore": Object {
              "EncryptionKey": Object {
                "Id": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":kms:eu-central-1:test:alias/entral-1tencryptionaliasc61f42e15f71f7b330df",
                    ],
                  ],
                },
                "Type": "KMS",
              },
              "Location": "test-support-eu-central-1eplicationbucketba99dc76aa175940ed5d",
              "Type": "S3",
            },
            "Region": "eu-central-1",
          },
          Object {
            "ArtifactStore": Object {
              "EncryptionKey": Object {
                "Id": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":kms:us-east-1:test:alias/s-east-1tencryptionalias106a6c2b35b2e6e195df",
                    ],
                  ],
                },
                "Type": "KMS",
              },
              "Location": "test-support-us-east-1eplicationbucketc55ea03e6eea3c55aca9",
              "Type": "S3",
            },
            "Region": "us-east-1",
          },
          Object {
            "ArtifactStore": Object {
              "EncryptionKey": Object {
                "Id": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                    "Arn",
                  ],
                },
                "Type": "KMS",
              },
              "Location": Object {
                "Ref": "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
              },
              "Type": "S3",
            },
            "Region": "eu-west-1",
          },
        ],
        "Name": "yivi-issue-app-snapshot-tests",
        "RestartExecutionOnUpdate": true,
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineRoleECC5AD0C",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "CodeStarSourceConnection",
                  "Version": "1",
                },
                "Configuration": Object {
                  "BranchName": "snapshot-tests",
                  "ConnectionArn": "arn:CodeStarConnection:12124253124:blablab",
                  "FullRepositoryId": "GemeenteNijmegen/yivi-issue-app",
                },
                "Name": "GemeenteNijmegen_yivi-issue-app",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "GemeenteNijmegen_yivi_issue_app_Source",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineSourceGemeenteNijmegenyiviissueappCodePipelineActionRoleF82108E2",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "EnvironmentVariables": "[{\\"name\\":\\"_PROJECT_CONFIG_HASH\\",\\"type\\":\\"PLAINTEXT\\",\\"value\\":\\"60e46c9806e04c9ac6425c705a3d4dc6840131b9414d2324452bbfdacca48be3\\"}]",
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsPipelineBuildSynthCdkBuildProject0B8C24F6",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "GemeenteNijmegen_yivi_issue_app_Source",
                  },
                ],
                "Name": "Synth",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Build",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "EnvironmentVariables": "[{\\"name\\":\\"_PROJECT_CONFIG_HASH\\",\\"type\\":\\"PLAINTEXT\\",\\"value\\":\\"3da127aa189deb54d8c0980cc729eac900f60d30510349b54f3361e2131edba9\\"}]",
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsUpdatePipelineSelfMutation37599748",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "SelfMutate",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "UpdatePipeline",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset1C189BA20",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset1",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset10446E0C95",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset10",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset111260C818",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset11",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset12F38DA3A0",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset12",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset23D32E595",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset2",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset3883C457E",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset3",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset42365941F",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset4",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset5B39D4721",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset5",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset660E1EEBC",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset6",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset7ECBB555C",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset7",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset86049361A",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset8",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "yiviissueappsnapshottestsAssetsFileAsset98D1014BB",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "FileAsset9",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Assets",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-parameters-params",
                  "TemplateConfiguration": "Synth_Output::assembly-test-yivi-issue-parameters/testyiviissueparametersparams570018C1.template.json.config.json",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-parameters/testyiviissueparametersparams570018C1.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-parameters-params",
                },
                "Name": "Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 2,
              },
            ],
            "Name": "yivi-issue-parameters",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-dns-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapidnsstack0CA380B5.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "dns-stack.Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-key-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapikeystack684916D0.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "key-stack.Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 1,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-dns-stack",
                },
                "Name": "dns-stack.Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 2,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-key-stack",
                },
                "Name": "key-stack.Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 2,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-us-east-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-dnssec-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapidnssecstack63B0519B.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "dnssec-stack.Prepare",
                "Region": "us-east-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                    ],
                  ],
                },
                "RunOrder": 3,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-sessions-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapisessionsstack643FDD45.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "sessions-stack.Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 3,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-us-east-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-us-cert-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapiuscertstackE611B7B6.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "us-cert-stack.Prepare",
                "Region": "us-east-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                    ],
                  ],
                },
                "RunOrder": 3,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-dnssec-stack",
                },
                "Name": "dnssec-stack.Deploy",
                "Region": "us-east-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                    ],
                  ],
                },
                "RunOrder": 4,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-sessions-stack",
                },
                "Name": "sessions-stack.Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 4,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-us-cert-stack",
                },
                "Name": "us-cert-stack.Deploy",
                "Region": "us-east-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                    ],
                  ],
                },
                "RunOrder": 4,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-api-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapiapistack723A40B1.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "api-stack.Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 5,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-api-stack",
                },
                "Name": "api-stack.Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 6,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-cloudfront-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapicloudfrontstack5E5974C5.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "cloudfront-stack.Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 7,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-eu-central-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-dashboard-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapidashboardstackC1239387.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "dashboard-stack.Prepare",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 7,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_REPLACE",
                  "Capabilities": "CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND",
                  "ChangeSetName": "PipelineChange",
                  "RoleArn": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":iam::123456789012:role/cdk-hnb659fds-cfn-exec-role-123456789012-us-east-1",
                      ],
                    ],
                  },
                  "StackName": "yivi-issue-api-waf-stack",
                  "TemplatePath": "Synth_Output::assembly-test-yivi-issue-api/testyiviissueapiwafstack52D21665.template.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Synth_Output",
                  },
                ],
                "Name": "waf-stack.Prepare",
                "Region": "us-east-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                    ],
                  ],
                },
                "RunOrder": 7,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-cloudfront-stack",
                },
                "Name": "cloudfront-stack.Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 8,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-dashboard-stack",
                },
                "Name": "dashboard-stack.Deploy",
                "Region": "eu-central-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                    ],
                  ],
                },
                "RunOrder": 8,
              },
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CloudFormation",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ActionMode": "CHANGE_SET_EXECUTE",
                  "ChangeSetName": "PipelineChange",
                  "StackName": "yivi-issue-api-waf-stack",
                },
                "Name": "waf-stack.Deploy",
                "Region": "us-east-1",
                "RoleArn": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                    ],
                  ],
                },
                "RunOrder": 8,
              },
            ],
            "Name": "yivi-issue-api",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "yiviissueappsnapshottestsPipelineRoleDefaultPolicyB8DA57DE": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineSourceGemeenteNijmegenyiviissueappCodePipelineActionRoleF82108E2",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsCodeBuildActionRoleCE4DAEC7",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":s3:::test-support-eu-central-1eplicationbucketba99dc76aa175940ed5d",
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":s3:::test-support-eu-central-1eplicationbucketba99dc76aa175940ed5d/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-eu-central-1",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":s3:::test-support-us-east-1eplicationbucketc55ea03e6eea3c55aca9",
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":s3:::test-support-us-east-1eplicationbucketc55ea03e6eea3c55aca9/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":iam::123456789012:role/cdk-hnb659fds-deploy-role-123456789012-us-east-1",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueappsnapshottestsPipelineRoleDefaultPolicyB8DA57DE",
        "Roles": Array [
          Object {
            "Ref": "yiviissueappsnapshottestsPipelineRoleECC5AD0C",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueappsnapshottestsPipelineRoleECC5AD0C": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueappsnapshottestsPipelineSourceGemeenteNijmegenyiviissueappCodePipelineActionRoleDefaultPolicy864A2B31": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "codestar-connections:UseConnection",
              "Effect": "Allow",
              "Resource": "arn:CodeStarConnection:12124253124:blablab",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:PutObjectAcl",
                "s3:PutObjectVersionAcl",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueappsnapshottestsPipelineSourceGemeenteNijmegenyiviissueappCodePipelineActionRoleDefaultPolicy864A2B31",
        "Roles": Array [
          Object {
            "Ref": "yiviissueappsnapshottestsPipelineSourceGemeenteNijmegenyiviissueappCodePipelineActionRoleF82108E2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueappsnapshottestsPipelineSourceGemeenteNijmegenyiviissueappCodePipelineActionRoleF82108E2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::test:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "yiviissueappsnapshottestsUpdatePipelineSelfMutation37599748": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "Description": "Pipeline step test/Pipeline/UpdatePipeline/SelfMutate",
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": true,
          "Type": "LINUX_CONTAINER",
        },
        "Name": "yivi-issue-app-snapshot-tests-selfupdate",
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "yiviissueappsnapshottestsUpdatePipelineSelfMutationRoleE152BE74",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": [
        \\"npm install -g aws-cdk@2\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"cdk -a . deploy test --require-approval=never --verbose\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "yiviissueappsnapshottestsUpdatePipelineSelfMutationRoleDefaultPolicyDEAFAD0D": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:eu-west-1:test:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "yiviissueappsnapshottestsUpdatePipelineSelfMutation37599748",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:eu-west-1:test:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "yiviissueappsnapshottestsUpdatePipelineSelfMutation37599748",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:eu-west-1:test:report-group/",
                    Object {
                      "Ref": "yiviissueappsnapshottestsUpdatePipelineSelfMutation37599748",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Condition": Object {
                "ForAnyValue:StringEquals": Object {
                  "iam:ResourceTag/aws-cdk:bootstrap-role": Array [
                    "image-publishing",
                    "file-publishing",
                    "deploy",
                  ],
                },
              },
              "Effect": "Allow",
              "Resource": "arn:*:iam::test:role/*",
            },
            Object {
              "Action": "cloudformation:DescribeStacks",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "s3:ListBucket",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "yiviissueappsnapshottestsPipelineArtifactsBucket61DE6359",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "yiviissueappsnapshottestsPipelineArtifactsBucketEncryptionKeyA521D9A6",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "yiviissueappsnapshottestsUpdatePipelineSelfMutationRoleDefaultPolicyDEAFAD0D",
        "Roles": Array [
          Object {
            "Ref": "yiviissueappsnapshottestsUpdatePipelineSelfMutationRoleE152BE74",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "yiviissueappsnapshottestsUpdatePipelineSelfMutationRoleE152BE74": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "cdkManaged",
            "Value": "yes",
          },
          Object {
            "Key": "Project",
            "Value": "yivi-issue-app",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;
