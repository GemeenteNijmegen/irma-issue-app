<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

        <title>Gegevens toevoegen aan IRMA</title>

        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="{{ assets }}/style/theme.css"/>
        <link rel="stylesheet" href="{{ assets }}/style/main.css"/>

    </head>
    <body>
        <div id="app">
            <div class="fixedHeaderContainer">
                <div class="headerWrapper wrapper">
                    <header>
                        <a href="/irma/gemeente/start" style="height: 50px;">
                            <img class="logo" src="{{ assets }}/img/irmaLogo.png" alt="IRMA Laden">
                        </a>
                        <div class="navigationWrapper navigationSlider">
                            <nav class="slidingNav"></nav>
                        </div>
                    </header>
                </div>
            </div>
            <div class="navPusher">
                <div>
                    <div class="homeContainer">
                        <div class="homeSplashFade">
                            <div class="wrapper homeWrapper">
                                <div class="inner">
                                    <h1 class="projectTitle">Gegevens toevoegen aan IRMA</h1>
                                </div>
                                <div id="irma" style="margin: 0px auto; max-width: 800px;">
                                    <br/>
                                    <section class="irma-web-form" id="irma-web-form" style="margin-left:auto;margin-right:auto;"></section>
                                </div>
                                <div id="irma" style="margin: 0px auto; max-width: 800px; text-align:center;">
                                    <br/>
                                    <p>Er ging iets mis prbeer het opnieuw.</p>
                                </div>
                                <div id="logout" style="display: flex; justify-content: space-between; flex-wrap: wrap; max-width: 600px; margin: 50px auto;">
                                    <div style="flex: 1 1 0%; min-width: 300px;">
                                        <a href="{{ authUrl }}">
                                            <img src="{{ assets }}/img/digidLogo.png">
                                            <h3 style="display: inline-block; position: relative; top: -15px; left: 15px;">Inloggen met DigiD</h3>
                                        </a>
                                    </div>
                                    {{#irmaEnabled}}
                                    <div style="flex: 1 1 0%; min-width: 300px;">
                                        <a href="{{ authUrl }}">
                                            <img src="{{ assets }}/img/irmaLogo.png" style="width:60px;">
                                            <h3 style="display: inline-block; position: relative; top: -15px; left: 15px;">Inloggen met IRMA</h3>
                                        </a>
                                    </div>
                                    {{/irmaEnabled}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mainContainer" style="padding-bottom: 0px;">
                        <footer class="nav-footer" id="footer">
                            <section class="sitemap">
                                <a href="" class="nav-home" style="opacity: 1;">
                                    <img src="{{ assets }}/img/irmaLogo.png" alt="IRMA Laden" style="width: 72px;"></a>
                            </section>
                        </footer>
                    </div>
                </div>
            </div>
        </div>

        <script src="{{ assets }}/js/irma.js" type="text/javascript"></script>

        <script>
            const irmaIssue = irma.newWeb({
                debugging: true, // Enable to get helpful output in the browser console
                element: '#irma-web-form', // Which DOM element to render to
                session: { // Configure your flow here, see usage guide of irma-core
                    url: '{{{ irmaServer }}}',
                    start: false,
                    mapping: {
                        sessionPtr: r => '{{{ sessionPtr }}}',
                        sessionToken: r => '{{{ sessionToken }}}'
                        //frontendRequest: r => '{{{ frontendRequest }}}'
                    }
                }
            });

            irmaIssue.start().then(result => {
                document.getElementById("irma").hide();
                document.getElementById("logout").show();
            }}).catch(error => {
                document.getElementById("error").show();
                document.getElementById("logout").show();
            });
        </script>


    </body>
</html>
