<html>

<head></head>

<body>

    <div id="irma-web-form"></div>

    <script src="https://github.com/privacybydesign/irma-frontend-packages/releases/latest/download/irma.js"></script>
    <script>

        const resp = {
            "sessionPtr": {
                "u": "https://gw-test.nijmegen.nl/irma/session/KVamZ0RnCa3NBYxhSqcn",
                "irmaqr": "issuing"
            },
            "token": "JKjYcfjLYXeFqJXvrCIT",
            "frontendRequest": {
                "authorization": "KS0bVOeq81W2RxSQTKNi",
                "pairingHint": true,
                "minProtocolVersion": "1.0",
                "maxProtocolVersion": "1.1"
            }
        }

        const exampleWeb = irma.newWeb({
            debugging: true,
            element: '#irma-web-form',
            session: {
                url: 'https://gw-test.nijmegen.nl',
                start: false,
                mapping: {
                    sessionPtr: r => { return resp.sessionPtr },
                    sessionToken: r => { return resp.token },
                },
                result: {
                    url:           (o, {sessionPtr, sessionToken}) => `https://irma-issue.sandbox.csp-nijmegen.nl/result?token=${sessionToken}`,
                    parseResponse: r => r.json()
                }
            },
            state: {
                serverSentEvents: false,
            }

        });

        exampleWeb.start()
            .then(result => console.log("Successful disclosure! ðŸŽ‰", result))
            .catch(error => console.error("Couldn't do what you asked ðŸ˜¢", error));

    </script>
</body>

</html>